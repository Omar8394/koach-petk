{% extends "layouts/base.html" %}
{% load i18n %}
{% block title %}{% endblock %}
<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
 
<style>
    
</style>
{% endblock stylesheets %}

{% block content %}
<div class="content">
   <div class="page-inner animated fadeInRight">
      <div class="page-header">
         <h4 class="page-title">Academic</h4>
         <ul class="breadcrumbs">
            <li class="nav-home">
               <a href="{% url 'home' %}">
                  <i class="flaticon-home"></i>
               </a>
            </li>
            <li class="separator">
               <i class="flaticon-right-arrow"></i>
            </li>
            <li class="nav-item">
               <a href="#">Academic</a>
            </li>
         </ul>
      </div>
      <div class="page-category">
         
           
            <div class="form-group" id="groupDate">

                <div class="row">
                    <div class="card col-6" style="background-color: #1a2035 !important; color: white;">
                        <div class="section-header">
                            <h3 >Planes de Formacion Grupo: {{titulo}}</h3>
                            
                         </div> 
                        <div class="card-body m-0 p-0" >

                           <ul id="resultado">
                              
                           </ul>
                  </div>
                </div>

                    <div class="card col-6" style="background-color: #1a2035 !important; color: white;">
                        <div class="section-header">
                            <h3 >Estructura:</h3>
                            
                         </div>

                        <div class="card-body m-0 p-0" >
                           <div id="resultadotwo" >  
                              
                           </div>

                      </div>
                        <!-- <a title="Click to remove all chosen permissions at once." href="#" id="id_permissions_remove_all_link" class="selector-clearall">Remove all</a> -->
                    </div>
                </div>

            </div>
         </div>
      
   </div>
</div>
<div class="modal fade" id="addNewModal" tabindex="-1" role="dialog" aria-hidden="true">
   <div id="addNewModalContent" class="modal-dialog  modal-dialog-centered" role="document">

   </div>
</div>
<div class="modal fade" id="addNewModale" tabindex="-1" role="dialog" aria-hidden="true">
   <div id="addNewModalContente" class="modal-dialog  modal-dialog-centered" role="document">

   </div>
</div>
<div class="modal fade" id="addNewModales" tabindex="-1" role="dialog" aria-hidden="true">
   <div id="addNewModalContentes" class="modal-dialog  modal-dialog-centered" role="document">

   </div>
</div>
{% endblock content %}
{% block javascripts %}
<script>
   let ids={{gruposi}}
   let query = ""
   let limit = 4
   let page =""
   const renderContent = (id,page,limit)=>{
      document.querySelector("#resultado").classList.add("is-loading")
      fetch("{% url 'getcomponentsxplan'%}", {
         ...fetchObject,
         body: JSON.stringify({
            query,
            page,
            limit,
            id,
         })
      })
      .then(async(res)=>{
         result = await res.text()
         document.querySelector("#resultado").classList.remove("is-loading")
         document.querySelector("#resultado").innerHTML = result
      })
   }
   renderContent(ids,page,limit) 
   const renderContentwo = (page,limit)=>{
      document.querySelector("#resultadotwo").classList.add("is-loading")
      fetch("{% url 'getestru_components'%}", {
         ...fetchObject,
         body: JSON.stringify({
            query,
            page,
            limit,
         })
      })
      .then(async(res)=>{
         result = await res.text()
         document.querySelector("#resultadotwo").classList.remove("is-loading")
         document.querySelector("#resultadotwo").innerHTML = result
      })
   }
   renderContentwo(page,limit)
   const goToTable =  async (Page)  => {
      const contenedorLista = document.getElementById("renderList")
      
      const resultado = await  renderContentwo(Page,limit)
         contenedorLista.innerHTML = resultado
   
   
   }
   const goToTables =  async (Page)  => {
      const contenedorLista = document.getElementById("renderListwo")
      
      const resultado = await  renderContent(ids,Page,limit)
         contenedorLista.innerHTML = resultado
   
   
   }
const ajax_up=(estructura)=>{
   
$.ajax({
   type: "POST",
   url: "{% url 'Saveestrutura_plan' %}",
   data: {
     
       'estructura':estructura,
       'id':ids,
       'csrfmiddlewaretoken': '{{ csrf_token }}',

   },
   dataType: "json",
   success: function (response) {
      if(response.message == "ok") { 
         makeMessage(1, "{% translate 'Muy Bien!' %}", "{% translate 'Registro copiado y guardado satisfactoriamente' %}", "fa fa-check")
         
         renderContent(ids,page,limit)
      }
       else{
      makeMessage(4, "{% translate 'Alerta' %}!", "{% translate 'ya esta estructura posee este compÃ³nente' %}", 'fa fa-exclamation-triangle')

       }
   
   },
   failure: function () {
       swal("failure");
   }
}); 
}
const showContent = (id) => {
   
    let contenido = document.getElementById(`childsTopic${id}`)
    contenido.classList.toggle("card-list-item-close")
 }
 
</script>	
<!-- Specific Page JS goes HERE  -->
{% endblock javascripts %}